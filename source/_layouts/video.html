---
layout: default
---

<!--
  Jekyll Video Layout
  =========================
  This layout is used for individual video pages on the STRATO Mercata site.
  - Jekyll Layouts: https://jekyllrb.com/docs/layouts/
  - Liquid Templating: https://shopify.github.io/liquid/
  - HTML5: https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/HTML5
  - Schema.org Video: https://schema.org/VideoObject
-->


<!--
  Back link navigation to the Videos index.
  - Jekyll Variables: https://jekyllrb.com/docs/variables/
-->
<div class="back-link">
    <a href="{{ '/videos/' | relative_url }}">&larr; Back to Videos</a>
</div>

<article class="video-episode">
    <!--
      Video header card - Contains video embed, title, and date
    -->
    <div class="content-embed-card video-header-card">
        {% if page.embed.url %}
        <!--
          Video player embed
        -->
        <div class="video-embed-wrapper">
            <div class="video-embed-responsive">
                <iframe src="{{ page.embed.url }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
            </div>
        </div>
        {% endif %}

        <!--
          Video title and date
        -->
        <div class="video-header-info">
            <h1>{% if page.lowercase_title %}{{ page.lowercase_title }}{% else %}{{ page.title }}{% endif %}</h1>
            {% if page.date %}
                <div class="release-date video-release-date">
                    <em>{{ page.date | date: "%B %d, %Y" }}{% if page.author %} by {{ page.author }}{% endif %}</em>
                </div>
            {% endif %}
        </div>
    </div>

    <header>
        <!--
          Video meta information (hosts, guests, description).
          - Jekyll Front Matter: https://jekyllrb.com/docs/front-matter/
        -->
        <div class="content-meta">
            {% if page.hosts and page.hosts.size > 0 or page.guests and page.guests.size > 0 %}
            <div class="video-hosts-guests">
                {% if page.hosts and page.hosts.size > 0 %}
                    {% assign visible_hosts = "" | split: "" %}
                    {% for host in page.hosts %}
                        {% assign host_found = false %}
                        {% assign host_hidden = false %}
                        {% assign host_url = '' %}
                        {% assign host_display_name = host %}
                        {% for person in site.people %}
                            {% if person.name == host %}
                                {% assign host_found = true %}
                                {% assign host_url = person.url %}
                                {% assign host_display_name = person.name %}
                                {% if person.hidden %}
                                    {% assign host_hidden = true %}
                                {% endif %}
                                {% if person.nickname and person.nickname != '' %}
                                    {% assign host_display_name = person.name | append: ' ("' | append: person.nickname | append: '")' %}
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                        {% unless host_hidden %}
                            {% if host_found %}
                                {% capture host_entry %}<a href="{{ host_url | relative_url }}">{{ host_display_name }}</a>{% endcapture %}
                            {% else %}
                                {% assign host_entry = host %}
                            {% endif %}
                            {% assign visible_hosts = visible_hosts | push: host_entry %}
                        {% endunless %}
                    {% endfor %}
                    {% if visible_hosts.size > 0 %}
                <div class="episode-hosts">
                    <strong>
                      {% if visible_hosts.size == 1 %}Host:{% else %}Hosts:{% endif %}
                    </strong>
                    {{ visible_hosts | join: ", " }}
                </div>
                    {% endif %}
                {% endif %}
                {% if page.guests and page.guests.size > 0 %}
                    {% assign visible_guests = "" | split: "" %}
                    {% for guest in page.guests %}
                        {% assign guest_found = false %}
                        {% assign guest_hidden = false %}
                        {% assign guest_url = '' %}
                        {% assign guest_display_name = guest %}
                        {% for person in site.people %}
                            {% if person.name == guest %}
                                {% assign guest_found = true %}
                                {% assign guest_url = person.url %}
                                {% assign guest_display_name = person.name %}
                                {% if person.hidden %}
                                    {% assign guest_hidden = true %}
                                {% endif %}
                                {% if person.nickname and person.nickname != '' %}
                                    {% assign guest_display_name = person.name | append: ' ("' | append: person.nickname | append: '")' %}
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                        {% unless guest_hidden %}
                            {% if guest_found %}
                                {% capture guest_entry %}<a href="{{ guest_url | relative_url }}">{{ guest_display_name }}</a>{% endcapture %}
                            {% else %}
                                {% assign guest_entry = guest %}
                            {% endif %}
                            {% assign visible_guests = visible_guests | push: guest_entry %}
                        {% endunless %}
                    {% endfor %}
                    {% if visible_guests.size > 0 %}
                <div class="episode-guests">
                    <strong>
                      {% if visible_guests.size == 1 %}Guest:{% else %}Guests:{% endif %}
                    </strong>
                    {{ visible_guests | join: ", " }}
                </div>
                    {% endif %}
                {% endif %}
            </div>
            {% endif %}
        </div>
        {% if page.description %}
        <div class="video-description">
            {{ page.description | markdownify }}
        </div>
        {% endif %}
    </header>
    
    <!--
      Main video content, with auto-linking for videos, blogs, and people.
      - Jekyll Content Variable: https://jekyllrb.com/docs/variables/#content
    -->
    <div class="video-content">
        {% include auto_link.html content=content %}
    </div>
    
    {% if page.links %}
    <!--
      Related links section for the video.
      - HTML5 Sectioning: https://developer.mozilla.org/en-US/docs/Web/HTML/Element/section
    -->
    <div class="video-links">
        <h3>Related Links</h3>
        <ul>
            {% for link in page.links %}
            <li><a href="{{ link.url }}" target="_blank">{{ link.title }}</a></li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
    
    {% if page.tags and page.tags.size > 0 %}
    <!--
      Video tags for categorization and search.
      - Jekyll Front Matter: https://jekyllrb.com/docs/front-matter/#tags-and-categories
    -->
    <div class="video-tags">
        <strong>Tags:</strong>
        {% for tag in page.tags %}
            <span class="tag">{{ tag }}</span>{% unless forloop.last %}, {% endunless %}
        {% endfor %}
    </div>
    {% endif %}
</article>

{% comment %}
  Back-links Section - Automatically generated list of pages that reference this video
{% endcomment %}
{% include back-links.html %}
